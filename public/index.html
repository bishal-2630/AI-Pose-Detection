<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full Body Pose Detection - Dual Arm Angles</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>ü§∏ Full Body Pose Detection</h1>
            <p class="subtitle">Real-time dual arm angle tracking with correct left/right mapping</p>

            <!-- Mobile-friendly summary display -->
            <div class="mobile-summary">
                <div class="summary-item">
                    <span class="summary-label">Left Angle:</span>
                    <span id="mobileLeftAngle" class="summary-value angle-left">--¬∞</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Right Angle:</span>
                    <span id="mobileRightAngle" class="summary-value angle-right">--¬∞</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Points:</span>
                    <span id="mobilePoints" class="summary-value points-count">0/33</span>
                </div>
            </div>
        </header>

        <div class="content">
            <!-- Video Feed -->
            <div class="video-section">
                <div class="video-container">
                    <!-- Mirror view -->
                    <video id="webcam" autoplay playsinline muted style="transform: scaleX(-1);"></video>
                    <canvas id="overlayCanvas"></canvas>

                    <!-- Simplified overlay - Only reps counter -->
                    <div class="reps-overlay">
                        <div class="reps-display">
                            <div class="reps-label">TOTAL REPS</div>
                            <div id="repsCounter" class="reps-value">0</div>
                        </div>
                    </div>
                </div>

                <div class="controls-panel">
                    <div class="counter-display">
                        <div class="counter-title">Bicep Curl Reps</div>
                        <div class="counter-group">
                            <div class="counter-item total-reps">
                                <span class="counter-label">Total Reps:</span>
                                <span id="totalCounter" class="counter-value">0</span>
                            </div>
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button id="resetBtn" class="btn btn-reset">
                            <span class="btn-icon">üîÑ</span>
                            <span class="btn-text">Reset All</span>
                        </button>

                        <button id="apiToggle" class="btn btn-api">
                            <span class="btn-icon">üåê</span>
                            <span class="btn-text">API Mode</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Stats Panel -->
            <div class="stats-panel">
                <!-- Real-time Angles -->
                <div class="angles-card">
                    <h2>üìê Dual Arm Angles</h2>
                    <div class="angles-display">
                        <div class="angle-gauge left-angle">
                            <div class="gauge-header">
                                <span class="arm-label">Left Arm Angle</span>
                                <span id="leftAngleValue" class="angle-text">--¬∞</span>
                            </div>
                            <div class="gauge-circle">
                                <div class="circle-fill" id="leftAngleFill"></div>
                                <div class="circle-center">
                                    <div class="angle-stage" id="leftStage">--</div>
                                </div>
                            </div>
                            <div class="gauge-footer">
                                <div class="stage-indicator" id="leftStageIndicator"></div>
                                <span class="stage-text" id="leftStageText">Ready</span>
                            </div>
                        </div>

                        <div class="angle-gauge right-angle">
                            <div class="gauge-header">
                                <span class="arm-label">Right Arm Angle</span>
                                <span id="rightAngleValue" class="angle-text">--¬∞</span>
                            </div>
                            <div class="gauge-circle">
                                <div class="circle-fill" id="rightAngleFill"></div>
                                <div class="circle-center">
                                    <div class="angle-stage" id="rightStage">--</div>
                                </div>
                            </div>
                            <div class="gauge-footer">
                                <div class="stage-indicator" id="rightStageIndicator"></div>
                                <span class="stage-text" id="rightStageText">Ready</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Performance Stats -->
                <div class="performance-card">
                    <h2>üìä Performance</h2>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-icon">üéØ</div>
                            <div class="stat-content">
                                <div class="stat-label">Landmarks Detected</div>
                                <div class="stat-value" id="detectedPoints">0</div>
                                <div class="stat-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="landmarksProgress"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="stat-item">
                            <div class="stat-icon">‚ö°</div>
                            <div class="stat-content">
                                <div class="stat-label">Processing Mode</div>
                                <div class="stat-value" id="processingMode">API</div>
                                <div class="stat-detail" id="latencyDisplay">Latency: --ms</div>
                            </div>
                        </div>

                        <div class="stat-item">
                            <div class="stat-icon">üìà</div>
                            <div class="stat-content">
                                <div class="stat-label">Frame Rate</div>
                                <div class="stat-value" id="fpsCounter">-- FPS</div>
                                <div class="stat-detail" id="confidenceDisplay">Confidence: --%</div>
                            </div>
                        </div>

                        <div class="stat-item">
                            <div class="stat-icon">ü§ñ</div>
                            <div class="stat-content">
                                <div class="stat-label">Detection Status</div>
                                <div class="stat-value" id="detectionStatus">Ready</div>
                                <div class="stat-detail" id="armVisibility">Arms: --</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Landmark Legend -->
                <div class="legend-card">
                    <h2>üìç Landmark Colors</h2>
                    <div class="legend-grid">
                        <div class="legend-item">
                            <span class="legend-dot" style="background: #FF6B6B;"></span>
                            <span class="legend-text">Left Arm (Screen)</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-dot" style="background: #4CC9F0;"></span>
                            <span class="legend-text">Right Arm (Screen)</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-dot" style="background: #FFD166;"></span>
                            <span class="legend-text">Center Points</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-dot" style="background: #06D6A0;"></span>
                            <span class="legend-text">Angle Arcs</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-dot" style="background: #118AB2;"></span>
                            <span class="legend-text">Skeleton Lines</span>
                        </div>
                    </div>
                    <div class="legend-note">
                        <p>üí° <strong>Rep Counting:</strong> Each arm curl counts as 1 rep</p>
                        <p>Mirror view - Left/right match what you see in camera</p>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>Dual Arm Angle Tracking | Single Hand Rep Counting | Mirror View</p>
            <p class="footer-note">Each arm movement counts as 1 rep - Total reps displayed on screen</p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>

</html>